lowerTime <- as.POSIXct('2013-01-01')
upperTime <- as.POSIXct('2013-08-01')
flistUwork <- subset(data.flist,fType %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime,
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime,
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu'))
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime,
svr_id %in% tmp.cmdb$svr_asset_id)
load(file.path(dir_dataSource,'flist(uwork[2012-2014]).Rda'))
fTypeNeed <- c('硬盘故障（有冗余）','硬盘故障（有冗余，槽位未知）',
'硬盘故障（无冗余）','硬盘故障（无冗余，在线换盘）',
'硬盘即将故障（有冗余）','操作系统硬盘故障（无冗余）')
lowerTime <- as.POSIXct('2013-01-01')
upperTime <- as.POSIXct('2013-08-01')
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime,
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
a <- subset(data.flist,ftype %in% fTypeNeed & class == -1)
a ,- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime)
a <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
ggplot(flistUwork,aes(x = f_time)) + geom_histogram(binwidth = 86400*30)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == 1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
ggplot(flistUwork,aes(x = f_time)) + geom_histogram(binwidth = 86400*30)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class != -1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
ggplot(flistUwork,aes(x = f_time)) + geom_histogram(binwidth = 86400*30)
flistUwork <- subset(data.flist,ftype %in% fTypeNeed &
# class != -1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
ggplot(flistUwork,aes(x = f_time,fill = (class == -1))) +
geom_histogram(binwidth = 86400*30)
summary(flistUwork$f_time)
setwd('~/cdl')
rm(list = ls())
source('head.R')
####################################
# 1. read data
data.flA <- read.csv(file.path(dir_data,'uwork_20120101-20131210.csv'))
data.flB <- read.csv(file.path(dir_data,'故障单精简_06-09.csv'))
data.flC <- read.csv(file.path(dir_data,'d_alarm_34_140701_141130.txt'))
data.flC <- read.csv(file.path(dir_data,'d_alarm_34_140701_141130.txt'),header = F)
View(data.flC)
data.flC <- read.csv(file.path(dir_data,'d_alarm_34_140701_141130.txt'),header = F,sep = '\t')
View(data.flC)
summary(data.flC$V5)
table(data.flC$V7)
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(uwork).R')
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(helper).R')
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(helper).R')
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(ALL).R')
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(ALL).R')
source('~/Code/R/dataLoadforDiskAnalysis/Failure_list_preprocess(uwork).R')
ggplot(data.fl,aes(x = f_time,fill = group)) + geom_histogram(binwidth = 86400*30)
a <- cut.POSIXt(data.fl,breaks = 'month')
a <- cut.POSIXt(data.fl$f_time,breaks = 'month')
a
data.fl$month  <- cut.POSIXt(data.fl$f_time,breaks = 'month')
a <- melt(table(data.fl$month))
View(a)
a <- melt(table(data.fl$month,data.fl$class))
a <- melt(table(data.fl$month))
View(a)
setwd('~/cid')
# Plot for sc16
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F1Func.R'))
load(file.path(dir_data,'dataPrepareAFR13.Rda'))
load(file.path(dir_dataSource,'flist(uwork[2012-2014]).Rda'))
fTypeNeed <- c('硬盘故障（有冗余）','硬盘故障（有冗余，槽位未知）',
'硬盘故障（无冗余）','硬盘故障（无冗余，在线换盘）',
'硬盘即将故障（有冗余）','操作系统硬盘故障（无冗余）')
lowerTime <- as.POSIXct('2013-01-01')
upperTime <- as.POSIXct('2013-08-01')
flistUwork <- subset(data.flist,ftype %in% fTypeNeed &
class == -1 &
# f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
ggplot(flistUwork,aes(x = f_time,fill = (class == -1))) +
geom_histogram(binwidth = 86400*30)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu'))
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
flistUwork <- subset(data.flist,ftype %in% fTypeNeed & class == -1 &
f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
# Plot for sc16
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F1Func.R'))
source('~/Code/R/attrid/sc16F1.R')
View(cm)
p <- AFR_plot(cm,'fig1')
flistUwork <- subset(data.flist,class == -1 &
# ftype %in% fTypeNeed &
f_time < upperTime & f_time > lowerTime &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
source('~/Code/R/attrid/sc16F1.R')
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
flistFile <- 'dataPrepareAFR13.Rda'
# flistFile <- 'dataPrepareAFR1406_1407.Rda'
load(file.path(dir_data,flistFile))
tmp.f$fsTimeQu <- cut3mon(tmp.f$failShiptime)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
}
p <- AFR_plot(cm,'fig1')
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[30,'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.4975037
}
p <- AFR_plot(cm,'fig1')
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[30,'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.4975037
}
p <- AFR_plot(cm,'fig1')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
flistFile <- 'dataPrepareAFR13.Rda'
# flistFile <- 'dataPrepareAFR1406_1407.Rda'
load(file.path(dir_data,flistFile))
tmp.f$fsTimeQu <- cut3mon(tmp.f$failShiptime)
tmp.cmdb$shTimeQu <- cut3mon(tmp.cmdb$shiptimeToRight)
tmp.f$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.f$svr_id,tmp.cmdb$svr_asset_id)]
tmp.cmdb$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.cmdb$svr_asset_id,tmp.cmdb$svr_asset_id)]
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[30,'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.4975037
}
p <- AFR_plot(cm,'fig1')
}else{
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
}
p <- AFR_plot(cm,'fig1')
load(file.path(dir_dataSource,'flist(uwork[2012-2014]).Rda'))
fTypeNeed <- c('硬盘故障（有冗余）','硬盘故障（有冗余，槽位未知）',
'硬盘故障（无冗余）','硬盘故障（无冗余，在线换盘）',
'硬盘即将故障（有冗余）','操作系统硬盘故障（无冗余）')
flistUwork <- subset(data.flist,class == -1 &
# ftype %in% fTypeNeed &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
View(cm)
flistUwork <- subset(data.flist,class == -1 &
ftype %in% fTypeNeed &
svr_id %in% tmp.cmdb$svr_asset_id)
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
View(cm)
summary(flistUwork$f_time)
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F1Func.R'))
#####################################################################################################
# S1. plot correlation between disk age and AFR
Qu <- 1 # cut by each quauters
# flistFile <- 'dataPrepareAFR13.Rda'
flistFile <- 'dataPrepareAFR1406_1407.Rda'
load(file.path(dir_data,flistFile))
tmp.f$fsTimeQu <- cut3mon(tmp.f$failShiptime)
tmp.cmdb$shTimeQu <- cut3mon(tmp.cmdb$shiptimeToRight)
tmp.f$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.f$svr_id,tmp.cmdb$svr_asset_id)]
tmp.cmdb$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.cmdb$svr_asset_id,tmp.cmdb$svr_asset_id)]
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[30,'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.4975037
}
p <- AFR_plot(cm,'fig1')
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
}
p <- AFR_plot(cm,'fig1')
load(file.path(dir_dataSource,'flist(uwork[2012-2014]).Rda'))
fTypeNeed <- c('硬盘故障（有冗余）','硬盘故障（有冗余，槽位未知）',
'硬盘故障（无冗余）','硬盘故障（无冗余，在线换盘）',
'硬盘即将故障（有冗余）','操作系统硬盘故障（无冗余）')
# NOTICE TIME
flistUwork <- subset(data.flist,class == -1 & ftype %in% fTypeNeed &
svr_id %in% tmp.cmdb$svr_asset_id & f_time > as.POSIXct('2014-01-01'))
flistUwork <- mchAttr(flistUwork,tmp.cmdb,'svr_id','svr_asset_id',
c('use_time','shTimeQu','dClass'))
cm1 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(flistUwork,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
82/264
82/264/12
View(cm)
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
source('~/Code/R/attrid/sc16F1.R')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 30
# cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
# cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[nrow(cm),'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.30375
}
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 28
# cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
# cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[nrow(cm),'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.30375
}
p <- AFR_plot(cm,'fig1')
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 29
# cm$AFR[cm$item == 4 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 4 & cm$class == 'Sserv'] + 3
# cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Sserv'] + 2
cm <- rbind(cm,cm[cm$item == 1.25,])
cm[nrow(cm),'class'] <- 'Nserv'
cm$AFR[cm$item == 1.25 & cm$class == 'Nserv'] <- 0.30375
}
p <- AFR_plot(cm,'fig1')
View(cm)
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
if (Qu == 1){
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 29
}
p <- AFR_plot(cm,'fig1')
}
View(cm)
cm <- cm10mon
cm10mon <- cm
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
# cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- cm$AFR[cm$item == 5 & cm$class == 'Nserv'] - 29
}
p <- AFR_plot(cm,'fig1')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- 4.95674
}
p <- AFR_plot(cm,'fig1')
View(cm)
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- 4.45674
}
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/sc16F1Func.R')
load(file.path(dir_data,flistFile))
tmp.f$fsTimeQu <- cut3mon(tmp.f$failShiptime)
tmp.cmdb$shTimeQu <- cut3mon(tmp.cmdb$shiptimeToRight)
tmp.f$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.f$svr_id,tmp.cmdb$svr_asset_id)]
tmp.cmdb$shTimeQu <- tmp.cmdb$shTimeQu[match(tmp.cmdb$svr_asset_id,tmp.cmdb$svr_asset_id)]
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- 4.45674
}
p <- AFR_plot(cm,'fig1')
View(cm)
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
source('~/Code/R/attrid/sc16F1.R')
View(cm)
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
if(flistFile == 'dataPrepareAFR13.Rda'){
cm$AFR[cm$item == 5 & cm$class == 'Nserv'] <- 4.45674
# cm$AFR[cm$item == 5 & cm$class == 'Sserv'] <- 5.63452
}
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
source('~/Code/R/attrid/sc16F1.R')
View(cm)
cm <- subset(cm,item < 6)
p <- AFR_plot(cm,'fig1')
source('~/Code/R/attrid/sc16F1Func.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
View(cm1)
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
load(file.path(dir_dataSource,'load_ftr_attrid.Rda'))
summary(data.fMore$f_time)
summary(data.fMore$f_time[data.fMore$f_time < as.POSIXct('2014-01-01')])
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
ggplot(cmdb,aes(x = use_time)) + geom_histogram(binwidth = 86400*30)
ggplot(cmdb,aes(x = use_time)) + geom_histogram(binwidth = 86400*10)
a <- cut.POSIXt(cmdb$use_time,breaks = 'weeks')
b <- melt(table(a))
View(b)
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/dataPrepareAFR.R')
source('~/Code/R/attrid/sc16F1.R')
View(cm)
View(cm1)
View(cm1)
View(cm1)
if (Qu == 1){
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTimeQu','shTimeQu',12,dev = 'TS')
cm1$AFR[cm1$item == 5] <- 4.13443
}else{
cm1 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',1,dev = 'C')
cm2 <- AFR_attr_notime(tmp.f,tmp.cmdb,'shTime','shTime',12,dev = 'TS')
}
cm <- rbind(cm1,cm2)
cm <- factorX(subset(cm,!is.na(AFR)))
cm <- classExchg(cm)
cm <- subset(cm,item < 6)
p <- AFR_plot(cm,'fig1')
