rwAge <- data.frame(matrix(table(ioTS$shTime,ioTS$sepRate25)))
View(rwAge)
rwAge <- table(ioTS$shTime,ioTS$sepRate25)
rwAge
a <- apply(rwAge,1,function(x)x/sum(x))
a
a <- data.frame(apply(rwAge,1,function(x)x/sum(x)))
View(a)
ggplot(subset(ioTS,shTime < 5),aes(x = shTime,fill = factor(sepRate25))) + geom_histogram(position = 'fill')
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$sepRate <- floor(io$rwRate/5)*5
io$sepRate25 <- floor(io$rwRate/10)*10
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRate25 <- io$sepRate25[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
ggplot(subset(ioTS,shTime < 5),aes(x = shTime,fill = factor(sepRate25))) + geom_histogram(position = 'fill')
5
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRate25))) + geom_histogram(position = 'fill')
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$sepRate <- floor(io$rwRate/5)*5
io$sepRate25 <- floor(io$rwRate/20)*20
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRate25 <- io$sepRate25[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRate25))) + geom_histogram(position = 'fill')
ggplot(subset(ioC,shTime < 6),aes(x = shTime,fill = factor(sepRate25))) + geom_histogram(position = 'fill')
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$sepRate <- floor(io$rwRate/5)*5
io$sepRateCut <- cut(io$rwRate,sep(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRateCut <- io$sepRateCut[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
ggplot(subset(ioC,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) + geom_histogram(position = 'fill')
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$sepRate <- floor(io$rwRate/5)*5
io$sepRateCut <- cut(io$rwRate,sep(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRateCut <- io$sepRateCut[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
io$sepRateCut <- cut(io$rwRate,sep(0,100,20),include.lowest = T)
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$sepRate <- floor(io$rwRate/5)*5
io$sepRateCut <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRateCut <- io$sepRateCut[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
ggplot(subset(ioC,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) + geom_histogram(position = 'fill')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) + geom_histogram(position = 'fill')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill') +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 10) +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 15) +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 5) +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 8) +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 10) +
xlab('Age(year)') + ylab('Fraction of number of bytes written')
ggplot(subset(ioTS,shTime < 6),aes(x = shTime,fill = factor(sepRateCut))) +
geom_histogram(position = 'fill',bins = 10) +
xlab('Age(year)') + ylab('Fraction of number of bytes written') +
guides(fill = guide_legend(title = NULL))
source('~/Code/R/attrid/sc16F3Func.R')
prwRC <- rwR_plot(subset(ioC,shTime < 6),'fig3rwRateC')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateC')
prwRC
source('~/Code/R/attrid/sc16F3Func.R')
prwRC <- rwR_plot(subset(ioC,shTime < 6),'fig3rwRateC')
prwRC
source('~/Code/R/attrid/sc16F3Func.R')
prwRC <- rwR_plot(subset(ioC,shTime < 6),'fig3rwRateC')
source('~/Code/R/attrid/sc16F3Func.R')
source('~/Code/R/attrid/sc16F3Func.R')
prwRC <- rwR_plot(subset(ioC,shTime < 6),'fig3rwRateC')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateC')
source('~/Code/R/attrid/sc16F3Func.R')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateC')
prwRC <- rwR_plot(subset(ioC,shTime < 6),'fig3rwRateC')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
quantile(io$TBN)
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,1,8,32,128),include.lowest = T)
io$sepRate <- floor(io$rwRate/5)*5
io$sepRateCut <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRate <- io$sepRate[match(f$svr_id,io$svrid)]
f$sepRateCut <- io$sepRateCut[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
AFRRateTSIn <- ioAFR(subset(ioTS),subset(fTS),c('sepRate','TBNcut'),12)
AFRRateTS <- ioAFR(subset(ioTS),subset(fTS),c('sepRate','TBNcut'),12)
AFRRateTS$AFR <- AFRRateTS$AFR*5
View(AFRRateTS)
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,1,8,32,128),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
AFRRateTS <- ioAFR(subset(ioTS),subset(fTS),c('sepRateCut10','TBNcut'),12)
View(AFRRateTS)
quantile(ioTS$TBNcut)
quantile(io$TBN[grepl('TS',io$dev_class_id])]
quantile(io$TBN[grepl('TS',io$dev_class_id)]
)
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,8,64,512),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
table(ioTS$TBNcut)
quantile(ioTS$TBN)
quantile(ioTS$TBN,sep(0,1,1/3))
quantile(ioTS$TBN,seq(0,1,1/3))
summary(io$TBN)
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,32,256,1024),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
AFRRateTS <- ioAFR(subset(ioTS),subset(fTS),c('sepRateCut10','TBNcut'),12)
View(AFRRateTS)
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_plot(subset(AFRRateTS),'fig3C')
AFRRateTS <- ioAFR(subset(ioTS),subset(fTS),c('sepRateCut10','TBNcut'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_plot(subset(AFRRateTS),'fig3C')
View(AFRRateTS)
View(AFRRateTS)
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 3),subset(fTS,shTime <= 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
AFRRateTS <- ioAFR(subset(ioTS,shTime > 3),subset(fTS,shTime > 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
View(AFRRateTS)
15/52/12*5
17/52/12*5*100
source('~/Code/R/attrid/sc16F3Func.R')
AFRRateTS <- ioAFR(subset(ioTS,shTime > 3),subset(fTS,shTime > 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
a <- subset(ioTS,shTime > 3)
a <- subset(ioTS,shTime <= 3)
AFRRateTS <- ioAFR(subset(ioTS,shTime > 2),subset(fTS,shTime > 2),c('sepRateCut10','TBNcut'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
View(AFRRateTS)
AFRRateTS <- ioAFR(subset(ioTS,shTime > 3),subset(fTS,shTime > 3),c('sepRateCut10','TBNcut'),12)
View(AFRRateTS)
sum(AFRRateTS)
sum(AFRRateTS$count)
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 3),subset(fTS,shTime <= 3),c('sepRateCut10','TBNcut'),12)
View(AFRRateTS)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
AFRRateC <- ioAFR(subset(ioC,shTime <= 3),subset(fC,shTime <= 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateC)[grepl('sepRateCut',names(AFRRateC))] <- 'sepRate'
AFRRateC$AFR <- AFRRateC$AFR*5
pC <- AFR_TBNrate_plot(subset(AFRRateC),'fig3C')
View(AFRRateC)
AFRRateC <- ioAFR(subset(ioC,shTime >3),subset(fC,shTime > 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateC)[grepl('sepRateCut',names(AFRRateC))] <- 'sepRate'
AFRRateC$AFR <- AFRRateC$AFR*5
pC <- AFR_TBNrate_plot(subset(AFRRateC),'fig3C')
View(AFRRateC)
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 3),subset(fTS,shTime <= 3),c('sepRateCut10','item'),12)
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 3),subset(fTS,shTime <= 3),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
View(AFRRateTS)
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
View(AFRRateTS)
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_TBNrate_plot(subset(AFRRateTS),'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
source('~/Code/R/attrid/sc16F3Func.R')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
source('~/Code/R/attrid/sc16F3Func.R')
pC <- AFR_TBNrate_plot(subset(AFRRateC),'fig3C')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
View(AFRRateTS)
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
debugSource('~/Code/R/attrid/sc16F3.R')
debugSource('~/Code/R/attrid/sc16F3.R')
debugSource('~/Code/R/attrid/sc16F3.R')
source('~/Code/R/attrid/head.R')
debugSource('~/Code/R/attrid/sc16F3.R')
debugSource('~/Code/R/attrid/sc16F3.R')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
# Plot for sc16
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
load(file.path(dir_data,'dataPrepareAFR1406_1407.Rda'))
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F3Func.R'))
#####################################################################################################
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,32,256,1024),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- myplot(subset(AFRRateTS),'fig3C','sepRateCut10','AFR','shTime')
pTS <- myplot(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myplot(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
# Plot for sc16
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
load(file.path(dir_data,'dataPrepareAFR1406_1407.Rda'))
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F3Func.R'))
#####################################################################################################
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,32,256,1024),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- myplot(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- myp(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
pTS <- myp(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
debugSource('~/Code/R/attrid/sc16F3.R')
source('~/Code/R/attrid/sc16F3.R')
source('~/Code/R/attrid/sc16F3.R')
pTS <- myp(AFRRateTS,'fig3C','sepRateCut10','AFR','shTime')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
AFRRateC <- ioAFR(subset(ioC,shTime >3),subset(fC,shTime > 3),c('sepRateCut10','TBNcut'),12)
names(AFRRateC)[grepl('sepRateCut',names(AFRRateC))] <- 'sepRate'
AFRRateC$AFR <- AFRRateC$AFR*5
pC <- AFR_TBNrate_plot(subset(AFRRateC),'fig3C')
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
View(AFRRateTS)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
View(AFRRateTS)
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
source('~/Code/R/attrid/sc16F3Func.R')
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
source('~/Code/R/attrid/sc16F3Func.R')
# Plot for sc16
rm(list = ls())
#@@@ CONFIGURE @@@#
source('head.R')
require(ggplot2)
load(file.path(dir_data,'dataPrepareAFR1406_1407.Rda'))
#@@@ Function @@@#
source(file.path(dir_code,'attr_function.R'))
source(file.path(dir_code,'sc16F3Func.R'))
#####################################################################################################
# S1.generate data
io <- subset(tmp.io)
io$rwRate <- (io$mean_903)/(io$mean_902 + io$mean_903)*100
io <- subset(io,!is.na(io$rwRate))
io$TBN <- (io$mean_902 + io$mean_903)*365*86400/1e9
io$TBNcut <- cut(io$TBN,c(0,32,256,1024),include.lowest = T)
io$sepRateCut5 <- floor(io$rwRate/5)*5
io$sepRateCut10 <- floor(io$rwRate/10)*10
io$sepRateCut20 <- cut(io$rwRate,seq(0,100,20),include.lowest = T)
io$warP <- 'Under warranty'
io$warP[io$shTime >= 3] <- 'Warranty expired'
f <- subset(tmp.f, svr_id %in% io$svrid)
f$TBNcut <- io$TBNcut[match(f$svr_id,io$svrid)]
f$sepRateCut5 <- io$sepRateCut5[match(f$svr_id,io$svrid)]
f$sepRateCut10 <- io$sepRateCut10[match(f$svr_id,io$svrid)]
f$sepRateCut20 <- io$sepRateCut20[match(f$svr_id,io$svrid)]
f$warP <- io$warP[match(f$svr_id,io$svrid)]
ioC <- subset(io,dClass == 'C')
fC <- subset(f,dClass == 'C')
ioTS <- subset(io,grepl('TS',dClass))
fTS <- subset(f,grepl('TS',dClass))
AFRRateTS <- ioAFR(subset(ioTS,shTime <= 5),subset(fTS,shTime <= 5),c('sepRateCut10','shTime'),12)
names(AFRRateTS)[grepl('sepRateCut',names(AFRRateTS))] <- 'sepRate'
AFRRateTS$AFR <- AFRRateTS$AFR*5
pTS <- AFR_AgeRate_plot (AFRRateTS,'fig3C')
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime,linetype = shTime)) + geom_line()
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime,linetype = shTime)) + geom_line()
pTS
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime)) + geom_line()
pTS
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime,linetype = factor(shTime))) + geom_line()
pTS
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime,linetype = factor(shTime))) +
# geom_line()+
stat_smooth(aes(x = sepRate), se = F, method = "lm", formula = y ~ poly(x, 5))
pTS
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
source('~/Code/R/attrid/sc16F3Func.R')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
source('~/Code/R/attrid/sc16F3Func.R')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
cm1 <- subset(cm,sepRateCut20 < 100)
source('~/Code/R/attrid/sc16F3Func.R')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
require(ggplot2)
source('~/Code/R/attrid/sc16F3Func.R')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
prwRTS <- rwR_plot(subset(ioTS,shTime < 6),'fig3rwRateTS')
View(ioTS)
pTS <- ggplot(AFRRateTS,aes(x = sepRate,y = AFR,group = shTime,linetype = factor(shTime))) +
geom_line()+
stat_smooth(aes(x = sepRate), se = F, method = "lm", formula = y ~ poly(x, 5))
pTS
