geom_point(aes(y = utilS),color = cbPalette[1],alpha = 0.05) +
geom_point(aes(y = utilCV),color = cbPalette[4],alpha = 0.01)
ggplot(smp_df(DT_mean,0.1),aes(x = log2(utilM))) +
geom_point(aes(y = utilS),color = cbPalette[1],alpha = 0.05) +
geom_point(aes(y = utilCV),color = cbPalette[6],alpha = 0.01)
ggplot(smp_df(DT_mean,0.1),aes(x = log2(utilM))) +
geom_point(aes(y = utilS),color = cbPalette[1],alpha = 0.05) +
geom_point(aes(y = utilCV),color = cbPalette[6],alpha = 0.05)
summary(DT_mean$utilCV)
a <- subset(DT_mean,utilCV > 130)
View(a)
View(DT_mean)
rm(list = ls());setwd('~/Code/R/Disk_Workload/');source('~/rhead')
load(file.path(dir_data,'duty_time_groupby_mean.Rda'))
View(DT_mean)
DT_mean <- replace_value(DT_mean,v2 = -1)
DT_mean <- subsetX(DT_mean,count > 15000)
quan_util <- with(DT_mean,data.frame(quantileX(utilM),quantileX(utilS),quantileX(utilCV)))
View(quan_util)
source('~/Code/R/R_libs_user/R_custom_lib.R')
quan_util <- with(DT_mean,data.frame(quantileX(utilM),quantileX(utilS),quantileX(utilCV)))
View(quan_util)
quan_util <- with(DT_mean,data.frame(mean = quantileX(utilM),SD = quantileX(utilS),CV = quantileX(utilCV)))
a <- subset(DT_mean,utilCV > 10)
View(a)
ggplot(a,aes(x = utilM,y = utilS,color = utilCV)) + geom_point()
ggplot(a,aes(x = utilM,y = utilS,color = utilCV)) + geom_point(alpha = 0.1)
ggplot(a,aes(x = utilM,y = utilS,color = utilCV)) + geom_point()
quan_util$id <- 0:100
ggplot(DT_mean,aes(x = utilM)) + geom_histogram(binwidth = 1)
b <- melt(table(round(DT_mean$utilM)))
ggplot(b,aes(x = Var1,y = log2(value))) + geom_bar(stat = 'identity')
ggplot(quan_util,aes(x = id,y = mean)) + geom_line() + geom_point()
ggplot(quan_util,aes(x = id,y = mean)) + geom_line() + geom_point() + xlim(c(0,33))
ggplot(subset(quan_util,id < 33),aes(x = id,y = mean)) + geom_line() + geom_point()
ggplot(subset(quan_util,id < 20),aes(x = id,y = mean)) + geom_line() + geom_point()
ggplot(subset(quan_util,id < 50),aes(x = id,y = mean)) + geom_line() + geom_point()
ggplot(subset(quan_util,id < 10),aes(x = id,y = mean)) + geom_line() + geom_point()
ggplot(subset(quan_util,id < 20),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 0;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 20;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 40;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 60;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 70;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
i = 80;ggplot(subset(quan_util,id < i + 20 & id > i),aes(x = id,y = mean)) + geom_line() + geom_point()
DT0 <- subset(DT_mean,utilM < 1)
DT1 <- subset(DT_mean,utilM < 2)
DT2 <- subset(DT_mean,utilM >= 2)
DT0 <- subset(DT_mean,utilM < 1)
DT1 <- subset(DT_mean,utilM < 2 & utilM >= 1)
DT2 <- subset(DT_mean,utilM >= 2)
ggplot(DT0,aes(x = utilM,y = utilSD,color = utilCV)) + geom_point()
ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point()
p0 <- ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_color_continuous()
p0
p0 <- ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_color_brewer()
p0
p0 <- ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_color_grey(,start = 0.1,end = 0.9)
p0 <- ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_color_grey(start = 0.1,end = 0.9)
p0
ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_color_grey()
p0 <- ggplot(DT0,aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_fill_brewer(palette='Set1')
p0
ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_fill_brewer(palette='Set2')
ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_colour_gradient(low = "white", high = "black")
ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_colour_gradient(low = "red", high = "green")
ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() +  scale_colour_gradient2()
ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_colour_gradient(low = "red", high = "green")
p0 <- ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_colour_gradient(low = "red", high = "green")
p1 <- ggplot(smp_df(DT1,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point()+ scale_colour_gradient(low = "red", high = "green")
p2 <- ggplot(smp_df(DT2,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point()+ scale_colour_gradient(low = "red", high = "green")
multiplot(p0,p1,p2,cols = 3)
DT0 <- subset(DT_mean,utilM < 1)
DT1 <- subset(DT_mean,utilM < 2 & utilM >= 1)
DT2 <- subset(DT_mean,utilM >= 2 & utilM < 10)
DT3 <- subset(DT_mean,utilM >= 10)
p0 <- ggplot(smp_df(DT0,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point() + scale_colour_gradient(low = "red", high = "green")
p1 <- ggplot(smp_df(DT1,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point()+ scale_colour_gradient(low = "red", high = "green")
p2 <- ggplot(smp_df(DT2,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point()+ scale_colour_gradient(low = "red", high = "green")
p3 <- ggplot(smp_df(DT3,0.2),aes(x = utilM,y = utilS,color = utilCV)) + geom_point()+ scale_colour_gradient(low = "red", high = "green")
multiplot(p0,p1,p2,p3,cols = 2)
cut_mean <- sort(unique(round(quan_util$mean)));DT_mean$mean_level <- cut(DT_mean$utilM,cut_mean,cut_mean[-length(cut_mean)])
View(DT_mean)
length(unique(DT_mean$mean_level))
cut_mean <- sort(unique(round(quan_util$mean)));DT_mean$mean_level <- cut(DT_mean$utilM,cut_mean,cut_mean[-length(cut_mean)])
cut_SD <- sort(unique(round(quan_util$SD)));DT_mean$SD_level <- cut(DT_mean$utilS,cut_SD,cut_SD[-length(cut_SD)])
cut_CV <- sort(unique(round(quan_util$CV)));DT_mean$CV_level <- cut(DT_mean$utilS,cut_CV,cut_CV[-length(cut_CV)])
DT_mean <- replace_value(DT_mean,v2 = -1)
cut_mean <- sort(unique(round(quan_util$mean)));DT_mean$mean_level <- fct2ori(cut(DT_mean$utilM,cut_mean,cut_mean[-length(cut_mean)]))
cut_SD <- sort(unique(round(quan_util$SD)));DT_mean$SD_level <- fct2ori(cut(DT_mean$utilS,cut_SD,cut_SD[-length(cut_SD)]))
cut_CV <- sort(unique(round(quan_util$CV)));DT_mean$CV_level <- fct2ori(cut(DT_mean$utilS,cut_CV,cut_CV[-length(cut_CV)]))
DT_mean <- replace_value(DT_mean,v2 = -1)
cut_mean <- sort(unique(round(quan_util$mean)));DT_mean$mean_level <- fct2num(cut(DT_mean$utilM,cut_mean,cut_mean[-length(cut_mean)]))
cut_SD <- sort(unique(round(quan_util$SD)));DT_mean$SD_level <- fct2num(cut(DT_mean$utilS,cut_SD,cut_SD[-length(cut_SD)]))
cut_CV <- sort(unique(round(quan_util$CV)));DT_mean$CV_level <- fct2num(cut(DT_mean$utilS,cut_CV,cut_CV[-length(cut_CV)]))
DT_mean <- replace_value(DT_mean,v2 = -1)
tb_level <- with(DT_mean,melt(table(mean_level,SD_level,CV_level)))
tb_level <- subset(tb_level,value != 0)
View(tb_level)
cut_CV
tb_level <- with(DT_mean,melt(table(mean_level,SD_level,CV_level)))
sort(unique(round(quan_util$CV)))
cut_mean <- sort(unique(round(quan_util$mean)));DT_mean$mean_level <- fct2num(cut(DT_mean$utilM,cut_mean,cut_mean[-length(cut_mean)]))
cut_SD <- sort(unique(round(quan_util$SD)));DT_mean$SD_level <- fct2num(cut(DT_mean$utilS,cut_SD,cut_SD[-length(cut_SD)]))
cut_CV <- sort(unique(round(quan_util$CV)));DT_mean$CV_level <- fct2num(cut(DT_mean$utilCV,cut_CV,cut_CV[-length(cut_CV)]))
DT_mean <- replace_value(DT_mean,v2 = -1)
tb_level <- with(DT_mean,melt(table(mean_level,SD_level,CV_level)))
tb_level <- subset(tb_level,value != 0)
rm(list = ls());source('~/rhead')
dir_dataset <- dir_data14DC
fname <- list.files(dir_dataset)
idx <- seq_len(length(fname))
i = 1
fn <- fname[i]
cat(sprintf('[%s]\t%s SATRT!!!\n',date(),fn))
load(file.path(dir_dataset,fn))
DT$time <- factor(as.Date(DT$time))
r_sta_svrid <- aggregate(DT[,3],by = list(DT$svrid),function(x)length(x))
source('~/Code/R/Disk_Workload/IO_statistic_2014/sta_base.R')
rm(list = ls());source('~/rhead')
fn <- 'data111.Rda'
cat(sprintf('[%s]\t%s SATRT!!!\n',date(),fn))
load(file.path(dir_dataset,fn))
dir_dataset <- dir_data14DC
cat(sprintf('[%s]\t%s SATRT!!!\n',date(),fn))
load(file.path(dir_dataset,fn))
DT$time <- factor(as.Date(DT$time))
r_sta_svrid <- data.frame(svrid = levels(DT$svrid),
count = as.numeric(tapply(DT$svrid,DT$svrid,count)),
sum_rps = as.numeric(tapply(DT$rps,DT$svrid,sum)),
sum_wps = as.numeric(tapply(DT$wps,DT$svrid,sum)),
sum_util = as.numeric(tapply(DT$wps,DT$svrid,sum)),
fn = fname[i])
tapply(DT$svrid,DT$svrid,count)
tapply(DT$rps,DT$svrid,sum)
tapply(DT$svrid,DT$svrid,count)
a <- tapply(DT$svrid,DT$svrid,count)
as.numeric(a)
as.numeric(tapply(DT$rps,DT$svrid,count)
)
r_sta_svrid <- data.frame(svrid = levels(DT$svrid),
count = as.numeric(tapply(DT$svrid,DT$svrid,length)),
sum_rps = as.numeric(tapply(DT$rps,DT$svrid,sum)),
sum_wps = as.numeric(tapply(DT$wps,DT$svrid,sum)),
sum_util = as.numeric(tapply(DT$wps,DT$svrid,sum)),
fn = fname[i])
fname <- list.files(dir_dataset)
i = 1
r_sta_svrid <- data.frame(svrid = levels(DT$svrid),
count = as.numeric(tapply(DT$svrid,DT$svrid,length)),
sum_rps = as.numeric(tapply(DT$rps,DT$svrid,sum)),
sum_wps = as.numeric(tapply(DT$wps,DT$svrid,sum)),
sum_util = as.numeric(tapply(DT$wps,DT$svrid,sum)),
fn = fname[i])
View(r_sta_svrid)
source('~/Code/R/Disk_Workload/IO_statistic_2014/sta_base.R')
save(r_sta_svrid,file = file.path(dir_data,'sta_base14.Rda'))
?kmeans
source('~/Code/R/Disk_Workload/Paper/Duty_Cycle/distfit_duty_cycle.R')
View(para.gamma)
para.gamma <- unlist(para.gamma)
para.gamma <- setNames(do.call(rbind,r),nm = c('svrid','scale','shape','aic'))
para.gamma <- data.frame(matrix(unlist(para.gamma),nrow=nrow(para.gamma),byrow = T))
View(para.gamma)
para.gamma <- setNames(do.call(rbind,r),nm = c('svrid','scale','shape','aic'))
para.gamma <- data.frame(matrix(unlist(para.gamma),nrow=nrow(para.gamma)))
View(para.gamma)
para.gamma <- setNames(data.frame(matrix(unlist(r),nrow=nrow(para.gamma))),nm = c('svrid','scale','shape','aic'))
View(para.gamma)
para.gamma <- setNames(data.frame(matrix(unlist(r),nrow=nrow(r),byrow = T)),nm = c('svrid','scale','shape','aic'))
para.gamma <- setNames(data.frame(matrix(unlist(r),nrow=length(r),byrow = T)),nm = c('svrid','scale','shape','aic'))
para.gamma <- setNames(data.frame(matrix(unlist(r),nrow=length(r))),nm = c('svrid','scale','shape','aic'))
para.gamma <- do.call(rbind,r)
para.gamma <- do.call(rbind,r)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=length(para.gamma))),nm = c('svrid','scale','shape','aic'))
View(para.gamma)
para.gamma <- do.call(rbind,r)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=length(para.gamma),byrow=T)),nm = c('svrid','scale','shape','aic'))
para.gamma <- do.call(rbind,r)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=length(para.gamma),byrow=T)),nm = c('svrid','scale','shape','aic'))
para.gamma <- do.call(rbind,r)
nrow(para.gamma)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=length(para.gamma))),nm = c('svrid','scale','shape','aic'))
para.gamma <- do.call(rbind,r)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=nrow(para.gamma))),nm = c('svrid','scale','shape','aic'))
View(para.gamma)
para.gamma <- do.call(rbind,r)
para.gamma <- setNames(data.frame(matrix(unlist(para.gamma),nrow=nrow(para.gamma))),nm = c('svrid','scale','shape','aic'))
with(para.gamma,scale <- fct2ori(scale))
para.gamma$scale <- fct2num(para.gamma$scale)
para.gamma$scale <- fct2num(para.gamma$scale)
para.gamma$shape <- fct2num(para.gamma$shape)
para.gamma$aic <- fct2num(para.gamma$aic)
View(para.gamma)
cut_scale <- with(para.gamma,seq(min(scale),max(scale),length.out = 100))
cut_shape <- with(para.gamma,seq(min(shape),max(shape),length.out = 100))
para.gamma$scale_level <- cut(para.gamma,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T)
para.gamma$scale_level <- cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T)
para.gamma$shape_level <- cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T)
cut_scale <- roundX(with(para.gamma,seq(min(scale),max(scale),length.out = 100)))
cut_shape <- roundX(with(para.gamma,seq(min(shape),max(shape),length.out = 100)))
para.gamma$scale_level <- cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T)
para.gamma$shape_level <- cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T)
para.gamma$scale_level <- fct2num(cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T))
para.gamma$shape_level <- fct2num(cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T))
table_para <- melt_table(para.gamma$scale_level,para.gamma$shape_level)
View(table_para)
table_para <- setNames(melt_table(para.gamma$scale_level,para.gamma$shape_level),c('scale','shape','count'))
table_para$rate <- array_rate(table_para$count)
ggplot(table_para,aes(x=scale,y=shape,fill=count)+geom_raster()
)
ggplot(table_para,aes(x=scale,y=shape,fill=count))+geom_raster()
cut_scale <- roundX(with(para.gamma,seq(min(scale),max(scale),length.out = 20)))
cut_shape <- roundX(with(para.gamma,seq(min(shape),max(shape),length.out = 20)))
para.gamma$scale_level <- fct2num(cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T))
para.gamma$shape_level <- fct2num(cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T))
table_para <- setNames(melt_table(para.gamma$scale_level,para.gamma$shape_level),c('scale','shape','count'))
table_para$rate <- array_rate(table_para$count)
ggplot(table_para,aes(x=scale,y=shape,fill=count))+geom_raster()
ggplot(table_para,aes(x=scale,y=shape,fill=rate))+geom_raster()
fail_data <- f201409
fail_data <- mchAttr(fail_data,para.gamma,'svrid','svrid',c('scale_level','shape_level'))
fr <- ioAFR(object_data,fail_data,attr = c('scale_level','shape_level'))
object_data <- para.gamma
object_data <- para.gamma
object_data <- subset(object_data,svrid %in% io14$svrid)
object_data <- mchAttr(object_data,model_svrid,'svrid','svrid',c('numD','mainModel'))
object_data$age <- cmdbSMP$age[match(object_data$svrid,cmdbSMP$svrid)]
object_data <- svrid_expand_disk(object_data)
fail_data <- f201409
fail_data <- mchAttr(fail_data,object_data,'svrid','svrid',c('scale_level','shape_level'))
fr <- ioAFR(object_data,fail_data,attr = c('scale_level','shape_level'))
View(fr)
rm(list = ls());setwd('~/Code/R/Disk_Workload/IO_statistic_2014/');source('~/rhead')
dir_dataset <- dir_data14DC
fname <- list.files(dir_dataset)
idx <- seq_len(length(fname))
i = 10
fn <- fname[i]
cat(sprintf('[%s]\t SATRT!!!\n',fn))
load(file.path(dir_dataset,fn))
splitDT <- split(DT,DT$svrid)
par(mfrow = c(5, 5))  # 3 rows and 2 columns
for (i in sample(1:length(splitDT),25)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
par(mfrow = c(3, 3))
for (i in sample(1:length(splitDT),25)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
sample(1:length(splitDT),9)
par(mfrow = c(4,4))
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
par(mfrow = c(3,3))
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$util, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = i, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$rps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),9)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(4,4))
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mar=c(1,1,1,1))
par(mfrow = c(4,4))
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(4,4),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(5,5),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),16)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),25)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(5,5),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),25)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(10,10),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),100)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(6,6),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
par(mfrow = c(6,6),mar=c(1,1,1,1))
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
for (i in sample(1:length(splitDT),36)) {
hist(splitDT[[i]]$wps, breaks = 100,main = names(splitDT)[i])
}
rm(list = ls());setwd('~/Code/R/Disk_Workload/Paper');source('~/rhead');
source('~/Code/R/Load_Data_Config_Failure/loadFunc.R')
source('../NewSC16/base_func.R')
load(file.path(dir_data,'uniform_data.Rda'))
load(file.path(dir_data,'distfit_dutycycle.Rda'))
a <- r[[`1`]]
a <- r[[1]]
View(a)
para.gamma <- do.call(rbind,r)
a1 <- data.frame(matrix(unlist(a),nrow = length(a)/4))
data.frame(matrix(unlist(a),nrow = length(a)/4))
length(a)/4
class(a)
nrow(a)
data.frame(matrix(unlist(a),nrow = nrow(a)/4))
r1 <- lapply(r,function(a)data.frame(matrix(unlist(a),nrow = nrow(a)/4)))
r2 <- do.call(rbind,r1)
View(r2)
para.gamma <- lapply(r,function(a)data.frame(matrix(unlist(a),nrow = nrow(a)/4)))
para.gamma <- do.call(rbind,para.gamma)
names(para.gamma) <- c('svrid','scale','shape','aic')
para.gamma$scale <- fct2num(para.gamma$scale)
para.gamma$shape <- fct2num(para.gamma$shape)
para.gamma$aic <- fct2num(para.gamma$aic)
View(para.gamma)
cut_scale <- roundX(with(para.gamma,seq(min(scale),max(scale),length.out = 20)))
cut_shape <- roundX(with(para.gamma,seq(min(shape),max(shape),length.out = 20)))
para.gamma$scale_level <- fct2num(cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T))
para.gamma$shape_level <- fct2num(cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T))
object_data <- para.gamma
object_data <- subset(object_data,svrid %in% io14$svrid)
object_data <- mchAttr(object_data,model_svrid,'svrid','svrid',c('numD','mainModel'))
object_data$age <- cmdbSMP$age[match(object_data$svrid,cmdbSMP$svrid)]
object_data <- svrid_expand_disk(object_data)
table_para <- setNames(melt_table(object_data$scale_level,object_data$shape_level),c('scale','shape','count'))
table_para$rate <- array_rate(table_para$count)
ggplot(table_para,aes(x=scale,y=shape,fill=rate))+geom_raster()
View(table_para)
cut_shape
quantileX(para.gamma$shape)
quantileX(para.gamma$scale)
cut_scale <- roundX(with(para.gamma,seq(min(scale),max(scale),length.out = 20)))
cut_shape <- roundX(with(para.gamma,seq(0,10,length.out = 20)))
para.gamma$scale_level <- fct2num(cut(para.gamma$scale,cut_scale,cut_scale[-length(cut_scale)],include.lowest = T))
para.gamma$shape_level <- fct2num(cut(para.gamma$shape,cut_shape,cut_shape[-length(cut_shape)],include.lowest = T))
object_data <- para.gamma
object_data <- subset(object_data,svrid %in% io14$svrid)
object_data <- mchAttr(object_data,model_svrid,'svrid','svrid',c('numD','mainModel'))
object_data$age <- cmdbSMP$age[match(object_data$svrid,cmdbSMP$svrid)]
object_data <- svrid_expand_disk(object_data)
table_para <- setNames(melt_table(object_data$scale_level,object_data$shape_level),c('scale','shape','count'))
table_para$rate <- array_rate(table_para$count)
ggplot(table_para,aes(x=scale,y=shape,fill=rate))+geom_raster()
fail_data <- f201409
fail_data <- mchAttr(fail_data,object_data,'svrid','svrid',c('scale_level','shape_level'))
fr <- ioAFR(object_data,fail_data,attr = c('scale_level','shape_level'))
p_fr <- ggplot(fr,aes_string(x = attr)) + geom_bar(aes(y=AFR),stat = 'identity')
ggplot(fr,aes_string(x = attr)) + geom_bar(aes(y=AFR),stat = 'identity')
ggplot(fr,aes(x=scale_level,y=shape_level,fill=AFR))+geom_raster()
View(fr)
ggplot(subset(fr,count>100),aes(x=scale_level,y=shape_level,fill=AFR))+geom_raster()
